---
uuid: deno-first-impression-20200515
title: Denoåˆé«”é©—
tags:
  - Deno
  - V6Engine
  - TypeScript
  - ECMA
categories:
  - ITåŠLinuxç¶œåˆ
  - NodeJSï¼Deno
thumbnail: https://photos.smugmug.com/photos/i-ZrXD5cx/0/54ed1143/XL/i-ZrXD5cx-XL.jpg
thumbnailStyles:
  - 'background-position: 0% 16%'
date: 2020-05-15 00:02:07
---
å°é¢ä¾†è‡ªå®˜æ–¹å˜…Deno 1.0æ–‡ç« ï¼š[Deno 1.0](https://deno.land/v1)

# å‰è¨€
Node.JSå˜…ä½œè€…å˜…æ–°ç©å…· ä»¥Rustå¯«æˆå˜… Denoçµ‚æ–¼è¿ä¾†1.0ç‰ˆæœ¬ï¼Œäº¦æ„å‘³ç€Denoé–‹å§‹é€²å…¥Stableï¼Œé–‹å§‹å¯ä»¥æœ‰å•²å˜¢å¯ä»¥ç©ä¸‹ï¼Œå¯ä»¥ä¿‚è‡ªå·±æ©Ÿå®‰è£compiled executable binã€‚æ‰€ä»¥ä»Šæ—¥ä¸»è¦ç°¡å–®è©¦ä¸‹Denoä¸€å•²å˜…å…¥é–€å˜¢ã€‚

# ç‰¹é»
ä¿‚ [Deno1.0å˜…å®˜æ–¹æ–‡ç« ](https://deno.land/v1) ä¸Šé¢ï¼Œæœ‰ä»‹ç´¹Denoå˜…éƒ¨åˆ†ç‰¹é»ï¼ŒåŒ…æ‹¬ï¼š
 - ä»¥Rustå¯«å˜…ç¨ç«‹Runtime
 - é è¨­æ”¯æ´TypeScript
 - å‰/å¾Œç«¯ã€One Script File/å¤§Projectéƒ½å¯ä»¥è‡ªç”±Scales
 - All is Promises
 - Rust APIs (accessåº•å±¤ç”¨ï¼‰
 - æ¯”NodeJSæ›´è‰¯å¥½æ€§èƒ½
å¼•ç”¨ï¼š
>We continuously track the performance of Deno's HTTP server. A hello-world Deno HTTP server does about 25k requests per second with a max latency of 1.3 milliseconds. A comparable Node program does 34k requests per second with a rather erratic max latency between 2 and 300 milliseconds.

> ä»¥å–®ç´”Output Hello, world. å˜…ç¨‹åºè€Œè¨€ï¼ŒDeno èƒ½ä»¥æœ€é«˜å˜…1.3mså˜…å»¶é² æ¯ç§’è™•ç†2è¬5åƒå€‹requestã€‚è€ŒNode.JSé›–ç„¶å¯ä»¥è™•ç†3è¬4åƒå€‹requestsï¼Œä½†å»¶é²å¯ä»¥é«˜é”2 - 300 msã€‚

# å®‰è£
Denoæœ¬èº«ä¿‚ç„¡deptå˜…åŸ·è¡Œæª”ï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹å˜…å®‰è£scriptå®‰è£ï¼š
```bash
curl -fsSL https://deno.land/x/install/install.sh | sh
```

ä¹‹å¾Œä¿‚~/.bashrc or ~/.zshrcä¹‹é¡å˜…åœ°æ–¹åŠ å…¥ï¼š
```
export DENO_INSTALL="/home/user/.deno"
export PATH="$DENO_INSTALL/bin:$PATH"
```

è€Œ .deno å˜…å®‰è£è·¯å¾‘è¦è¦–ä¹ä½ åŸ·è¡Œæ™‚å˜…ç•¶å‰userä½œæ›´æ”¹ï¼Œä¹‹å¾Œå„²å­˜å¥½ï¼Œé›¢é–‹ä¸¦é‡é–‹terminalï¼ŒæŸ¥çœ‹ç‰ˆæœ¬å¯ä»¥éµå…¥ ï¼š
```bash
deno --version
```
```
deno 1.0.0
v8 8.4.300
typescript 3.9.2
```

# åŸ·è¡ŒTypeScript
Denoæœ¬èº«å¯ä»¥ç›´æ¥ä¿‚å…§éƒ¨compileä¸¦åŸ·è¡ŒTypeScriptã€‚ä½†ï¼ŒDenoä¸æ­¢å¯ä»¥åŸ·è¡Œæœ¬åœ°å˜…tsæ–‡ä»¶ï¼Œäº¦å¯ä»¥åŸ·è¡Œé ç«¯å˜…tsæ–‡ä»¶ã€‚

ä¾‹å¦‚ä»¥å®˜æ–¹çˆ²ä¾‹ï¼š
```bash
deno run https://deno.land/std/examples/welcome.ts
```

è€Œè©²æ–‡ä»¶åªæœ‰ä¸€å¥ï¼š
```typescript
console.log("Welcome to Deno ğŸ¦•");
```

è€ŒåŸ·è¡Œçµæœä¿‚ï¼š
```bash
âœ  ~    deno run https://deno.land/std/examples/welcome.ts
Download https://deno.land/std/examples/welcome.ts
Warning Implicitly using master branch https://deno.land/std/examples/welcome.ts
Compile https://deno.land/std/examples/welcome.ts
Welcome to Deno ğŸ¦•
```

# Formatting
å‘¢å€‹æ¯”è¼ƒç°¡å–®ï¼ŒDenoå…§ç½®Formattingå·¥å…·ï¼Œå¯ä»¥ä¸€è¡Œcommandå¹«ä½ æ•´ç†å¥½å€‹ts fileã€‚

ä¾‹å¦‚æˆ‘å“‹è¼¸å…¥ä¸‹å…§å®¹ï¼š
```typescript
console.log(0); console.log(1); console.log(2);
```

åŸ·è¡Œï¼š
```bash
 deno fmt main.ts
```

æœƒè®Šæˆï¼š
```typescript
console.log(0);
console.log(1);
console.log(2);
```

# Import and standard Modules
ä¿‚Node.JSç•¶ä¸­ï¼Œpackageså¾ˆä¾è³´npmå˜…package managerï¼Œè€Œä¿‚Denoç•¶ä¸­ï¼Œä¸¦æ²’æœ‰ä¸€å€‹é¡ä¼¼NPMå˜…centralizeå˜…package managerï¼Œå–è€Œä»£ä¹‹å˜…ä¿‚é¡ä¼¼go-langå˜…import from URLå˜…ç©æ³•ã€‚

è€ŒDenoäº¦æä¾›å’—ä¸€å †Standard Modulesï¼Œå¯ä»¥åƒè¦‹ï¼š [https://deno.land/std/](https://deno.land/std/)

è€Œæˆ‘å“‹å¯ä»¥ç”¨ç•¶ä¸­ç”Ÿæˆuuidå˜…uuidï¼Œæˆ‘å“‹å¯ä»¥å¯«å€‹tsï¼ŒåŒ…æ‹¬ä»¥ä¸‹å…§å®¹ï¼š
``typescript
import { v4 } from "https://deno.land/std/uuid/mod.ts";
console.info(v4.generate())
```

ä¹‹å¾Œä»¥Deno commandåŸ·è¡Œï¼š
``bash
deno run main.ts
```

è¼¸å‡ºï¼š
``bash
âœ  DenoTest deno run main.ts
Compile /Deno_Projects/DenoTest/main.ts
Download https://deno.land/std/uuid/mod.ts
Download https://deno.land/std/uuid/v1.ts
Download https://deno.land/std/uuid/v4.ts
Download https://deno.land/std/uuid/_common.ts
8d8afa8d-b719-4227-806d-8b86bbb81455
```

å¦‚æœæƒ³ç”¨èˆŠç‰ˆæœ¬å¯ä»¥ä¿‚repoå¾Œé¢åŠ ä¸Š@ taggingè¿”å€‹versionï¼š
```typescript
import { v4 } from "https://deno.land/std@v0.38.0/uuid/mod.ts";
console.info(v4.generate())
```

åŸ·è¡Œçµæœï¼š
```bash
âœ  DenoTest deno run main.ts
Compile file:///run/media/len/EvolDisk/Developments/Deno_Projects/DenoTest/main.ts
Download https://deno.land/std@v0.38.0/uuid/mod.ts
Download https://deno.land/std@v0.38.0/uuid/v4.ts
1257f8fe-d82d-4b3b-ae3e-a6fd766d4ff4
```

ç”šè‡³ä¹å¯ä»¥å¾Pika.devä¹‹é¡å˜…CDNimportæ¨™æº–å˜…ECMAScript Modulesï¼š
```typescript
import * as pkg from "https://cdn.pika.dev/preact@^10.3.0";
```

# æ¬Šé™
Node.JSé è¨­ä¿‚å…¨æ¬Šé™ï¼Œé™¤éç³»çµ±æœ¬èº«é˜»æ­¢ï¼Œå¦å‰‡Node.JSèƒ½accessæ‰€æœ‰resourcesã€‚ä½†åœ¨Denoå…¥é¢ï¼Œå€åˆ†çˆ²å››å¤§ç¯„ç–‡å˜…æ¬Šé™ï¼Œåˆ†åˆ¥ä¿‚åŸ·è¡Œç’°å¢ƒå˜…i/oã€ç¶²çµ¡ã€file systemä»¥åŠå­é€²ç¨‹å˜…åŸ·è¡Œæ¬Šé™ã€‚

ä¾‹å¦‚ä½ å¯ä»¥ä¿‚ /tmp ä¸‹é¢éš¨ä¾¿å¯«å€‹text fileä¸¦ç¢ºèªå…§å®¹ï¼š
```bash
âœ  ~ echo hello,world. >> /tmp/test_file 
âœ  ~ cat /tmp/test_file
hello,world.
```

é€éé€éreadFile()è©¦åœ–è®€å–å…§å®¹ä¸¦å°ä¿‚logåº¦ï¼š
```typescript
console.log(await Deno.readFile('/tmp/test_file'));
```

ä½†é¡¯ç¤ºä»¥ä¸‹éŒ¯èª¤ï¼š
```bash
âœ  DenoTest deno run main.ts
error: Uncaught PermissionDenied: read access to "/Deno_Projects/DenoTest/input.txt", run again with the --allow-read flag
    at unwrapResponse ($deno$/ops/dispatch_json.ts:43:11)
    at Object.sendAsync ($deno$/ops/dispatch_json.ts:98:10)
    at async Object.open ($deno$/files.ts:37:15)
    at async Object.readFile ($deno$/read_file.ts:13:16)
    at async  /Deno_Projects/DenoTest/main.ts:6:29
```

åŠ å…¥æ¬Šé™å…è¨±ä¸¦åŸ·è¡Œï¼š
```bash
deno run --allow-read /tmp/test_file main.ts
```

è¼¸å‡ºï¼š
```bash
âœ  DenoTest deno run --allow-read /tmp/test_file main.ts
hello,world.
```

è€Œç¶²çµ¡äº¦åŒç†ï¼Œæˆ‘copyå’—å€‹å®˜æ–¹æä¾›å˜…sampleï¼š
```typescript
import { serve } from "https://deno.land/std@0.50.0/http/server.ts";
const s = serve({ port: 8000 });
console.log("http://localhost:8000/");
for await (const req of s) {
  req.respond({ body: "Hello World\n" });
}
```

åŸ·è¡Œï¼š
```bash
âœ  DenoTest deno run main.ts             
Compile /Deno_Projects/DenoTest/main.ts
error: Uncaught PermissionDenied: network access to "0.0.0.0:8000", run again with the --allow-net flag
    at unwrapResponse ($deno$/ops/dispatch_json.ts:43:11)
    at Object.sendSync ($deno$/ops/dispatch_json.ts:72:10)
    at Object.listen ($deno$/ops/net.ts:51:10)
    at listen ($deno$/net.ts:152:22)
    at serve (https://deno.land/std@0.50.0/http/server.ts:261:20)
    at /Deno_Projects/DenoTest/main.ts:2:11
âœ  DenoTest 
```

å‘¢å€‹æ™‚å€™å°±è¦åŠ å…¥allow flagï¼š
```bash
 deno run --allow-net="0.0.0.0:8000" main.ts
```

è¼¸å‡ºï¼š
```bash 
âœ  DenoTest deno run --allow-net="0.0.0.0:8000" main.ts
http://localhost:8000/
```

è€Œå‰å¾€ http://localhost:8000/ å°±æœƒè¦‹åˆ°è¼¸å‡ºå˜…å¥å­ã€‚
```
Hello World
```

# tsconfig
ç”±æ–¼tscéš±è—ä¿‚Denoç•¶ä¸­ï¼Œè€ŒDenoå¯¦éš›åŸ·è¡Œçš„æ˜¯JSï¼Œæ‰€ä»¥å…¶å¯¦ç•¶ç„¶å¯ä»¥ä¿‚é€étsconfig.json é»æ”¹è®Šcompile optionã€‚
å»ºç«‹tsconfig.jsonï¼š
```bash
tsc --init
```

ä¹‹å¾Œå¯ä»¥ä¿®æ”¹æ‚¨éœ€è¦å˜…å…§å®¹ï¼Œä¹‹å¾Œå¯ä»¥åŸ·è¡Œï¼š
```bash
deno run -c tsconfig.json main.ts
```

```bash
âœ  DenoTest 
deno run -c tsconfig.json main.ts
Compile /Deno_Projects/DenoTest/main.ts
Unsupported compiler options in 
â€/Deno_Projects/DenoTest/tsconfig.json"
  The following options were ignored:
    target, module, forceConsistentCasingInFileNames
test output
```

# çµèª
å…¶å¯¦æœƒç‡åˆ°ï¼ŒDenoä»¥TypeScriptçˆ²coreï¼Œäº¦æ„å‘³ç€Denoé è¨­å°±å¯ä»¥æœ‰TypeScriptå„ç¨®ç¾ä»£å˜…åŠŸèƒ½ï¼Œä¹‹é¤˜ï¼Œäº¦ç·Šè²¼EMCAæ¨™æº–ï¼Œäº¦æœ‰æ¯”è¼ƒç·Šå˜…æ¬Šé™ç®¡ç†ï¼Œæ˜é¡¯åœ°èƒ½æœ‰æ•ˆè™•ç†åˆ°Node.JS with JavaScriptæ­·å²éºç•™å˜…å„ç¨®æˆ‘å””æƒ³listå‡ºä¾†å˜…å•é¡Œã€‚è€Œç•¶ç„¶ï¼ŒDenoå˜…ç‰¹è‰²äº¦å””æ­¢å’å°‘ï¼Œæœ‰ç¯‡æ¯”è¼ƒè©³ç›¡å˜…ä»‹ç´¹å¯ä»¥åƒè€ƒï¼š[Deno 1.0: What you need to know](https://blog.logrocket.com/deno-1-0-what-you-need-to-know/)

# åƒè€ƒ
[Deno Offcial WebSite](https://deno.land/)
[Deno Samples](https://deno.land/std/examples)
[Deno Standard Modules](https://deno.land/std)
[Deno Manual](https://deno.land/manual)
